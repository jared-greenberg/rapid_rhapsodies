!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=13)}([function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(5),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e,n){var r=n(1).Symbol;t.exports=r},function(t,e,n){var r=n(0),o=n(4),i=n(7),c=Math.max,s=Math.min;t.exports=function(t,e,n){var a,u,l,f,h,d,v=0,y=!1,p=!1,b=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=a,r=u;return a=u=void 0,v=e,f=t.apply(r,n)}function g(t){return v=t,h=setTimeout(w,e),y?m(t):f}function x(t){var n=t-d;return void 0===d||n>=e||n<0||p&&t-v>=l}function w(){var t=o();if(x(t))return k(t);h=setTimeout(w,function(t){var n=e-(t-d);return p?s(n,l-(t-v)):n}(t))}function k(t){return h=void 0,b&&a?m(t):(a=u=void 0,f)}function E(){var t=o(),n=x(t);if(a=arguments,u=this,d=t,n){if(void 0===h)return g(d);if(p)return clearTimeout(h),h=setTimeout(w,e),m(d)}return void 0===h&&(h=setTimeout(w,e)),f}return e=i(e)||0,r(n)&&(y=!!n.leading,l=(p="maxWait"in n)?c(i(n.maxWait)||0,e):l,b="trailing"in n?!!n.trailing:b),E.cancel=function(){void 0!==h&&clearTimeout(h),v=0,a=d=u=h=void 0},E.flush=function(){return void 0===h?f:k(o())},E}},function(t,e,n){var r=n(1);t.exports=function(){return r.Date.now()}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(6))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(0),o=n(8),i=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=s.test(t);return n||a.test(t)?u(t.slice(2),n?2:8):c.test(t)?NaN:+t}},function(t,e,n){var r=n(9),o=n(12);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(2),o=n(10),i=n(11),c=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":c&&c in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(2),o=Object.prototype,i=o.hasOwnProperty,c=o.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var o=c.call(t);return r&&(e?t[s]=n:delete t[s]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";n.r(e);var r=n(3),o=n.n(r);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.arr=t.createRow(e),this.ctx=n,this.bouncing}var e,n,r;return e=t,r=[{key:"createRow",value:function(t){for(var e=Array(5).fill(0),n=[0,1,2,3,4],r=0;r<n.length;r++){var o=Math.floor(Math.random()*(n.length-r)+r),i=[n[o],n[r]];n[r]=i[0],n[o]=i[1]}var c=Math.floor(Math.random()*t+1);return n.slice(0,c).forEach((function(t){return e[t]=1})),e}}],(n=[{key:"drawRow",value:function(t,e){this.ctx.beginPath(),this.ctx.fillStyle="#51514D",this.ctx.strokeStyle="black",this.ctx.lineWidth=2,this.ctx.fillRect(75,t,350,88),this.ctx.strokeRect(75,t,70,88),this.ctx.strokeRect(145,t,70,88),this.ctx.strokeRect(215,t,70,88),this.ctx.strokeRect(285,t,70,88),this.ctx.strokeRect(355,t,70,88),this.ctx.closePath(),this.ctx.save(),this.ctx.lineWidth=4,this.ctx.moveTo(76,t-3),this.ctx.lineTo(429,t-3),this.ctx.lineTo(429,t+88),this.ctx.strokeStyle="#353430",this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.lineWidth=2,this.ctx.strokeStyle="black",this.ctx.moveTo(425,t),this.ctx.lineTo(431,t-6),this.ctx.closePath(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.fillStyle="black",this.ctx.moveTo(75,t),this.ctx.lineTo(81,t-6),this.ctx.lineTo(75,t-6),this.ctx.fill(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.moveTo(425,t+88),this.ctx.lineTo(431,t+82),this.ctx.lineTo(431,t+88),this.ctx.fill(),this.ctx.restore(),e&&(clearInterval(this.bouncing),this.drawMusicNotes(t))}},{key:"drawMusicNotes",value:function(t){var e=this,n=["#33FCFF","#AF33FF","#E5FE15","#FF8D33","#AFFF33"];this.arr.forEach((function(r,o){if(1===r){var i=70*o+109.5,c=t+55;e.ctx.beginPath(),e.ctx.arc(i,c,11,0,2*Math.PI),e.ctx.fillStyle=n[o],e.ctx.fill(),e.ctx.beginPath(),e.ctx.strokeStyle="white",e.ctx.arc(i,c,8,3*Math.PI/2,0),e.ctx.stroke(),e.ctx.beginPath(),e.ctx.strokeStyle=n[o],e.ctx.moveTo(i+10,c),e.ctx.lineTo(i+10,c-30),e.ctx.stroke(),e.ctx.closePath()}}))}},{key:"bounceNotes",value:function(t){var e=this,n=[2,4,6,8,10,8,6,4,2,0],r=0;this.bouncing=setInterval((function(){e.drawRow(t),e.drawMusicNotes(t-n[r%10]),r++}),100)}}])&&i(e.prototype,n),r&&i(e,r),t}();function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=r,this.rows=t.initializeBoard(e,n,r),this.length=this.rows.length,this.position=0,this.angry=document.getElementById("angry")}var e,n,r;return e=t,r=[{key:"initializeBoard",value:function(t,e,n){for(var r=[],o=0;o<t;o++)r.push(new c(e,n));return r}}],(n=[{key:"nextMove",value:function(){this.position++}},{key:"currentMoveValue",value:function(){return parseInt(this.rows[this.position].arr.join(""),2)}},{key:"drawErrors",value:function(t){for(var e=0;e<5;e++)(t&Math.pow(2,e))===Math.pow(2,e)&&(0==(this.currentMoveValue()&Math.pow(2,e))?(this.ctx.fillStyle="red",this.ctx.fillRect(357-70*e,322,67,86)):(this.ctx.fillStyle="white",this.ctx.fillRect(357-70*e,322,67,86),this.ctx.drawImage(this.angry,0,0,50,50,402-70*e,315,50,50),this.rows[this.position].drawMusicNotes(321)))}},{key:"flashErrors",value:function(t){var e=this,n=0;this.clearCurrentRow(),this.rows[this.position].drawRow(321,!0),this.drawErrors(t);var r=setInterval((function(){5===n?clearInterval(r):n%2!=0?e.drawErrors(t):(e.clearCurrentRow(),e.rows[e.position].drawRow(321,!0)),n++}),500)}},{key:"clearCurrentRow",value:function(){this.ctx.clearRect(0,310,500,109)}}])&&s(e.prototype,n),r&&s(e,r),t}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.board=new a(e,n,r),this.score=0,this.seconds=29,this.scoreElement=document.getElementById("score"),this.timerElement=document.getElementById("timer"),this.overWarning=document.querySelector(".game-over-warning"),this.y=321,this.showScore(),this.ctx=r,this.draw()}var e,n,r;return e=t,(n=[{key:"startTimer",value:function(){var t=this;this.showTime(),this.interval=setInterval((function(){t.seconds--,-1===t.seconds?(t.showTimesUp(),clearInterval(t.interval)):t.showTime()}),1e3)}},{key:"showTimesUp",value:function(){this.timerElement.style.color="red",this.timerElement.classList.add("flashing"),this.showTime("Time's Up!"),this.overWarning.classList.toggle("hidden"),this.board.clearCurrentRow(),this.board.rows[this.board.position].drawRow(321,!0)}},{key:"showTime",value:function(t){var e=t||this.seconds;this.timerElement.innerHTML=e}},{key:"showScore",value:function(){this.scoreElement.innerHTML="".concat(this.score," / ").concat(this.board.length)}},{key:"checkMove",value:function(t){var e=this.board.currentMoveValue()^t;return 0===e?(this.interval||this.startTimer(),this.board.nextMove(),this.draw(),this.score++,this.showScore(),this.score===this.board.length&&(clearInterval(this.interval),this.showTime("Perfect Score!")),!0):this.interval?(this.board.flashErrors(e),!1):void 0}},{key:"drawBox",value:function(){this.ctx.strokeStyle="green",this.ctx.lineWidth=2,this.ctx.strokeRect(1,311,498,103)}},{key:"draw",value:function(){var t=this;this.ctx.clearRect(0,0,500,420);var e=this.y;this.board.rows.forEach((function(n){e>-103&&e<420&&(t.interval?n.drawRow(e,!0):n.bounceNotes(e)),e-=103})),this.y+=12.875,this.gameOver()||this.drawBox(),(this.y-321-12.875)%103!=0&&requestAnimationFrame(this.draw.bind(this))}},{key:"quit",value:function(){clearInterval(this.interval),this.timerElement.style.color="white",this.timerElement.innerHTML=30,this.timerElement.classList.remove("flashing"),this.seconds=-1,this.overWarning.classList.contains("hidden")||this.overWarning.classList.toggle("hidden"),this.board.rows.forEach((function(t){return clearInterval(t.bouncing)}))}},{key:"gameOver",value:function(){return-1===this.seconds||this.score===this.board.length}}])&&u(e.prototype,n),r&&u(e,r),t}(),f={odeToJoy:["e5","e5","f5","g5","g5","f5","e5","d5","c5","c5","d5","e5","e5","d5","d5","e5","e5","f5","g5","g5","f5","e5","d5","c5","c5","d5","e5","d5","c5","c5","d5","d5","e5","c5","d5","e5","f5","e5","c5","d5","e5","f5","e5","d5","c5","d5","g4","e5","e5","f5","g5","g5","f5","e5","d5","c5","c5","d5","e5","d5","c5","c5"],minuetInG:["d5","g4","a4","b4","c5","d5","g4","g4","e5","c5","d5","e5","fs5","g5","g4","g4","c5","d5","c5","b4","a4","b4","c5","b4","a4","g4","fs4","g4","a4","b4","g4","b4","a4","d5","g4","a4","b4","c5","d5","g4","g4","e5","c5","d5","e5","fs5","g5","g4","g4","c5","d5","c5","b4","a4","b4","c5","b4","a4","g4","a4","b4","a4","g4","fs4","g4"],furElise:["e5","ds5","e5","ds5","e5","b4","d5","c5","a4","c4","e4","a4","b4","e4","gs4","b4","c5","e4","e5","ds5","e5","ds5","e5","b4","d5","c5","a4","c4","e4","a4","b4","e4","c5","b4","a4","b4","c5","d5","e5","g4","f5","e5","d5","f4","e5","d5","c5","e4","d5","c5","b4","e5","ds5","e5","ds5","e5","b4","d5","c5","a4","c4","e4","a4","b4","e4","gs4","b4","c5","e4","e5","ds5","e5","ds5","e5","b4","d5","c5","a4","c4","e4","a4","b4","e4","c5","b4","a4"]};function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),t}var x=function(){function t(e,n){b(this,t),this.audioCtx=e,this.fileName=n,this.loadSound(n),this.volume=e.createGain(),this.volume.gain.value=.075,this.volume.connect(e.destination)}return g(t,[{key:"loadSound",value:function(t){var e=this;this.source=this.audioCtx.createBufferSource(),fetch("./src/assets/notes/".concat(t,".mp3")).then((function(t){return t.arrayBuffer()})).then((function(t){return e.audioCtx.decodeAudioData(t)})).then((function(t){e.source.buffer=t,e.source.connect(e.volume)}))}},{key:"playSound",value:function(){this.source.start(),this.loadSound(this.fileName)}}]),t}(),w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(n,t);var e=v(n);function n(t,r){var o;return b(this,n),(o=e.call(this,t,f[r][0])).length=f[r].length,o.songTitle=r,o.position=0,o}return g(n,[{key:"playSound",value:function(){this.source.start(),++this.position<this.length&&this.loadSound(f[this.songTitle][this.position])}}]),n}(x),k=document.getElementById("game-board").getContext("2d"),E=document.getElementById("theme");E.volume=.2;var T=document.getElementById("splash-modal-background"),S=document.getElementById("sound-control"),j=!0;T.addEventListener("click",(function(){T.classList.add("hidden"),j&&E.play()})),window.addEventListener("blur",(function(t){t.preventDefault(),E.pause()})),window.addEventListener("focus",(function(t){t.preventDefault(),j&&!B.classList.contains("hidden")&&E.play()})),S.addEventListener("click",(function(t){t.preventDefault(),L()}));var O,P,M,R,I,L=function(){S.classList.toggle("fa-volume-mute"),S.classList.toggle("fa-volume-up"),j?E.pause():E.play(),j=!j},B=document.getElementById("menu-background"),F=document.getElementById("play-button"),C=document.getElementById("quit"),_=new AudioContext;F.addEventListener("click",(function(t){t.preventDefault(),B.classList.add("hidden"),O=document.querySelector('input[name="song"]:checked').value,P=document.querySelector('input[name="level"]:checked').value,M=new w(_,O),R=new x(_,"wrong"),I=new l(f[O].length,P,k),E.pause(),q()})),C.addEventListener("click",(function(t){t.preventDefault(),B.classList.remove("hidden"),I.quit(),E.currentTime=0,j&&E.play()}));var N=document.querySelectorAll(".player-key"),D={a:0,s:1,d:2,f:3,g:4},W=[0,0,0,0,0],q=function(){document.addEventListener("keydown",(function(t){if(!A&&!I.gameOver()){var e=D[t.key];void 0!==e&&1!==W[e]&&(W[e]=1,N[e].classList.add("selected"),U(W))}})),document.addEventListener("keyup",(function(t){W=Array(5).fill(0),void 0!==D[t.key]&&N[D[t.key]].classList.remove("selected")}))},A=!1,U=o()((function(t){t=parseInt(t.join(""),2);var e=I.checkMove(t);!0===e?M.playSound():!1===e&&(R.playSound(),A=!0,setTimeout((function(){A=!1,I.gameOver()||I.drawBox()}),2500))}),40)}]);
//# sourceMappingURL=main.js.map